# StablecoinWatch Environment Configuration

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
# Server port (default: 3000)
PORT=3000
# Server host (default: localhost)
HOST=localhost
# Environment: development, production, test
NODE_ENV=development
# Logging level: debug, info, warn, error
LOG_LEVEL=info

# =============================================================================
# API KEYS (Required for data fetching)
# =============================================================================
# CoinMarketCap API Key (required)
# Get from: https://coinmarketcap.com/api/
CMC_API_KEY=your_cmc_api_key_here

# Messari API Key (required) 
# Get from: https://messari.io/api
MESSARI_API_KEY=your_messari_api_key_here

# CoinGecko API Key (optional, for Pro features)
# Get from: https://www.coingecko.com/en/api/pricing
# COINGECKO_API_KEY=your_coingecko_api_key_here

# =============================================================================
# DATA SOURCE CONFIGURATION
# =============================================================================
# Comma-separated list of enabled sources: cmc,messari,coingecko,defillama
ENABLED_SOURCES=cmc,messari

# Source priority (JSON format, higher = preferred)
# SOURCE_PRIORITY={"cmc":10,"messari":8,"coingecko":6,"defillama":4}

# Enable/disable specific sources
# COINGECKO_ENABLED=false
# DEFILLAMA_ENABLED=false

# =============================================================================
# DATA UPDATE CONFIGURATION
# =============================================================================
# How often to refresh data (minutes, default: 15)
UPDATE_INTERVAL_MINUTES=15
# Initial delay before first fetch (ms, default: 0)
INITIAL_DELAY_MS=0
# Number of retry attempts for failed requests (default: 3)
RETRY_ATTEMPTS=3
# Delay between retries (ms, default: 1000)
RETRY_DELAY_MS=1000
# Request timeout (ms, default: 30000)
REQUEST_TIMEOUT_MS=30000

# =============================================================================
# DATA PROCESSING CONFIGURATION
# =============================================================================
# Threshold for matching coins by name similarity (0-1, default: 0.8)
MATCH_THRESHOLD=0.8
# Batch size for API requests (default: 50)
BATCH_SIZE=50
# Price range for stablecoin filtering
MIN_STABLECOIN_PRICE=0.50
MAX_STABLECOIN_PRICE=2.00
# Enable platform name normalization (default: true)
NORMALIZE_PLATFORMS=true
# Case insensitive platform matching (default: true)
CASE_INSENSITIVE_PLATFORMS=true

# =============================================================================
# API-SPECIFIC CONFIGURATION
# =============================================================================
# CoinMarketCap Settings
CMC_BASE_URL=https://pro-api.coinmarketcap.com
CMC_RATE_LIMIT=333
CMC_DAILY_LIMIT=10000
CMC_TIMEOUT_MS=15000
CMC_RETRIES=3
CMC_RETRY_DELAY_MS=2000
CMC_BATCH_SIZE=5000
CMC_MAX_RESULTS=5000
CMC_PRICE_MIN=0.50
CMC_PRICE_MAX=2.00

# Messari Settings  
MESSARI_BASE_URL=https://data.messari.io/api
MESSARI_RATE_LIMIT=20
MESSARI_HOURLY_LIMIT=1000
MESSARI_TIMEOUT_MS=20000
MESSARI_RETRIES=3
MESSARI_RETRY_DELAY_MS=3000
MESSARI_USE_STABLECOIN_ENDPOINT=true
MESSARI_INCLUDE_INACTIVE=false
MESSARI_BATCH_SIZE=100

# CoinGecko Settings
COINGECKO_BASE_URL=https://api.coingecko.com/api/v3
COINGECKO_RATE_LIMIT=10
COINGECKO_TIMEOUT_MS=10000
COINGECKO_RETRIES=2
COINGECKO_RETRY_DELAY_MS=1000

# DeFiLlama Settings
DEFILLAMA_BASE_URL=https://api.llama.fi
DEFILLAMA_RATE_LIMIT=30
DEFILLAMA_TIMEOUT_MS=15000
DEFILLAMA_RETRIES=3
DEFILLAMA_RETRY_DELAY_MS=2000
DEFILLAMA_INCLUDE_BRIDGES=false
DEFILLAMA_MIN_MCAP=1000000

# =============================================================================
# HEALTH MONITORING CONFIGURATION
# =============================================================================
# Enable health monitoring (default: true)
HEALTH_MONITORING=true
# Health check interval (ms, default: 60000)
HEALTH_CHECK_INTERVAL_MS=60000
# Error rate threshold for degraded mode (0-1, default: 0.2)
ERROR_RATE_THRESHOLD=0.2
# Response time threshold for alerts (ms, default: 10000)
RESPONSE_TIME_THRESHOLD_MS=10000
# Degraded mode activation threshold (0-1, default: 0.7)
DEGRADED_MODE_THRESHOLD=0.7
# Minimum healthy sources to avoid degraded mode (default: 1)
MIN_HEALTHY_SOURCES=1
# Health data retention (days, default: 7)
HEALTH_RETENTION_DAYS=7

# =============================================================================
# CIRCUIT BREAKER CONFIGURATION
# =============================================================================
# Enable circuit breaker pattern (default: true)
CIRCUIT_BREAKER=true
# Failures before opening circuit (default: 5)
CIRCUIT_BREAKER_FAILURES=5
# Circuit breaker timeout (ms, default: 60000)
CIRCUIT_BREAKER_TIMEOUT_MS=60000
# Reset timeout for half-open state (ms, default: 300000)
CIRCUIT_BREAKER_RESET_MS=300000

# =============================================================================
# MEMORY MANAGEMENT
# =============================================================================
# Enable automatic memory cleanup (default: true)
MEMORY_CLEANUP=true
# Memory cleanup interval (ms, default: 300000)
MEMORY_CLEANUP_INTERVAL_MS=300000
# Retain debug objects for troubleshooting (default: false)
RETAIN_DEBUG_OBJECTS=false
# Maximum memory usage in MB (default: 512)
MAX_MEMORY_MB=512

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================
# Enable caching (default: true)
CACHING=true
# Default cache TTL (ms, default: 300000)
CACHE_DEFAULT_TTL_MS=300000
# Maximum cache size (entries, default: 1000)
CACHE_MAX_SIZE=1000
# Cache type: memory, redis (default: memory)
CACHE_TYPE=memory

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
# Enable parallel API fetching (default: true)
PARALLEL_FETCHING=true
# Enable fallback to other sources on failure (default: true)
FALLBACK_ENABLED=true
# API request timeout (ms, default: 15000)
API_DEFAULT_TIMEOUT_MS=15000
# Maximum API retry attempts (default: 3)
API_MAX_RETRIES=3
# API retry delay (ms, default: 2000)
API_RETRY_DELAY_MS=2000
# Rate limit buffer to avoid hitting limits (0-1, default: 0.8)
RATE_LIMIT_BUFFER=0.8
# User agent for API requests
USER_AGENT=StablecoinWatch/2.0

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================
# Enable debug mode with extra logging (default: false)
DEBUG_MODE=false
# Mock API responses for development (default: false)
MOCK_APIS=false
# Log all API requests and responses (default: false)
LOG_REQUESTS=false
# Verbose logging for troubleshooting (default: false)
VERBOSE=false

# =============================================================================
# OPTIONAL: REDIS CONFIGURATION (if using Redis caching)
# =============================================================================
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=
# REDIS_DB=0

# =============================================================================
# OPTIONAL: DATABASE CONFIGURATION (for future persistence)
# =============================================================================
# DATABASE_URL=postgresql://user:pass@localhost:5432/stablecoinwatch
# DATABASE_POOL_SIZE=10